<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQL - Base Chinook | Emmanuel Paguiel BOUENDO</title>
    
    <!-- Mermaid pour les diagrammes -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    
    <!-- Chart.js pour les graphiques -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary: #E94560;
            --secondary: #0F3460;
            --accent: #16213E;
            --light: #F5F5F5;
            --dark: #1A1A2E;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            background-attachment: fixed;
        }
        
        /* Container principal */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Header */
        header {
            background: linear-gradient(135deg, var(--secondary), var(--accent));
            color: white;
            padding: 60px 20px;
            text-align: center;
            border-radius: 20px;
            margin-bottom: 40px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        
        header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        header .subtitle {
            font-size: 1.3em;
            opacity: 0.9;
            margin-top: 10px;
        }
        
        .badges {
            margin-top: 20px;
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .badge {
            background: var(--primary);
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        
        /* Navigation */
        nav {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            position: sticky;
            top: 20px;
            z-index: 100;
        }
        
        nav ul {
            list-style: none;
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
        }
        
        nav a {
            color: var(--secondary);
            text-decoration: none;
            font-weight: bold;
            transition: color 0.3s;
        }
        
        nav a:hover {
            color: var(--primary);
        }
        
        /* Sections */
        section {
            background: white;
            padding: 40px;
            margin-bottom: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        section h2 {
            color: var(--secondary);
            font-size: 2.2em;
            margin-bottom: 20px;
            border-bottom: 3px solid var(--primary);
            padding-bottom: 10px;
        }
        
        section h3 {
            color: var(--accent);
            font-size: 1.6em;
            margin: 30px 0 15px 0;
        }
        
        /* Stats cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .stat-card {
            background: linear-gradient(135deg, var(--primary), #FF6B9D);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 6px 20px rgba(233, 69, 96, 0.3);
            transition: transform 0.3s;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .stat-card .number {
            font-size: 3em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .stat-card .label {
            font-size: 1.1em;
            opacity: 0.95;
        }
        
        /* Diagramme Mermaid */
        .mermaid-container {
            background: var(--light);
            padding: 30px;
            border-radius: 10px;
            margin: 30px 0;
            overflow-x: auto;
        }
        
        /* Tables de r√©sultats */
        .results-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 0.95em;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            overflow: hidden;
            border-radius: 10px;
        }
        
        .results-table thead {
            background: var(--secondary);
            color: white;
        }
        
        .results-table th,
        .results-table td {
            padding: 15px;
            text-align: left;
        }
        
        .results-table tbody tr:nth-child(even) {
            background: var(--light);
        }
        
        .results-table tbody tr:hover {
            background: #e3f2fd;
        }
        
        /* Code SQL */
        pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 10px;
            overflow-x: auto;
            margin: 20px 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        code {
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        
        /* Insights */
        .insight {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid var(--primary);
        }
        
        .insight strong {
            font-size: 1.2em;
            display: block;
            margin-bottom: 10px;
        }
        
        /* Graphiques */
        .chart-container {
            position: relative;
            height: 400px;
            margin: 30px 0;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        /* Tabs */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--light);
        }
        
        .tab {
            padding: 15px 30px;
            background: transparent;
            border: none;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            color: #666;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }
        
        .tab:hover {
            color: var(--primary);
        }
        
        .tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Footer */
        footer {
            background: white;
            padding: 40px;
            text-align: center;
            border-radius: 15px;
            margin-top: 40px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        footer a {
            color: var(--primary);
            text-decoration: none;
            font-weight: bold;
        }


        .nav-links {
            text-align: center;
            margin-top: 40px;
            font-size: 1.1rem;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
        }
        
        .nav-links .back-link {
            color: #4f46e5; /* violet √©l√©gant */
            text-decoration: none;
            font-weight: 600;
            padding: 8px 14px;
            border-radius: 8px;
            transition: all 0.25s ease;
            background: #f3f4f6;
        }
        
        .nav-links .back-link:hover {
            background: #4f46e5;
            color: white;
            transform: translateY(-2px);
        }
        
        .nav-links .separator {
            color: #9ca3af;
            font-weight: 400;
        }


        /* Downloads section */
        .downloads-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }
        
        .download-card {
            background: white;
            border: 2px solid var(--light);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }
        
        .download-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            border-color: var(--primary);
        }
        
        .download-icon {
            font-size: 4em;
            margin-bottom: 15px;
        }
        
        .download-card h4 {
            color: var(--secondary);
            font-size: 1.4em;
            margin-bottom: 15px;
        }
        
        .download-card p {
            color: #666;
            line-height: 1.6;
            margin-bottom: 20px;
            min-height: 60px;
        }
        
        .download-meta {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
            font-size: 0.9em;
            color: #888;
        }
        
        .download-btn {
            background: linear-gradient(135deg, var(--primary), #FF6B9D);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(233, 69, 96, 0.3);
        }
        
        .download-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(233, 69, 96, 0.5);
        }
        
        .download-btn:active {
            transform: scale(0.98);
        }

        .nav-links .back-link {
            background: white;
            border: 1px solid #e5e7eb;
            padding: 10px 18px;
            border-radius: 50px;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            header h1 {
                font-size: 2em;
            }
            
            nav ul {
                flex-direction: column;
                gap: 10px;
            }
            
            section {
                padding: 20px;
            }
            
            .chart-container {
                height: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <h1>üóÑÔ∏è SQL  - Base Chinook</h1>
            <p class="subtitle">Projet acad√©mique - Apprentissage du SQL avec MySQL 8.0</p>
            <p style="margin-top: 15px; font-size: 0.95em; opacity: 0.9;">
                Master 2 MECEN | Universit√© de Tours | 2025-2026
            </p>
            <div class="badges">
                <span class="badge">MySQL 8.0</span>
                <span class="badge">21 requ√™tes r√©solues</span>
                <span class="badge">Vues & CTE</span>
                <span class="badge">Proc√©dures & Fonctions</span>
                <span class="badge">Projet P√©dagogique</span>
            </div>
        </header>
        
        <!-- Navigation -->
        <nav>
            <ul>
                <li><a href="#overview">Pr√©sentation</a></li>
                <li><a href="#erd">Diagramme ERD</a></li>
                <li><a href="#results">R√©sultats</a></li>
                <li><a href="#code">Exemples SQL</a></li>
                <li><a href="#analysis">Analyse</a></li>
                <li><a href="#downloads">üì• T√©l√©chargements</a></li>
            </ul>
        </nav>

        <!-- Lien de retour -->
        <div class="nav-links">
            <a href="../index.html" class="back-link">‚Üê Accueil</a>
            <span class="separator">‚Ä¢</span>
            <a href="../projects.html" class="back-link">Tous les projets</a>
        </div>
         
        
        <!-- Section Vue d'ensemble -->
        <section id="overview">
            <h2> Pr√©sentation du projet</h2>
            
            <p style="font-size: 1.2em; margin-bottom: 30px;">
                Ce projet a √©t√© r√©alis√© dans le cadre du cours de <strong>Bases de Donn√©es Avanc√©es</strong> 
                du Master 2 MECEN √† l'Universit√© de Tours. Il porte sur l'apprentissage et l'application 
                de techniques SQL avanc√©es √† travers l'exploitation de la base de donn√©es <strong>Chinook</strong>, 
                qui mod√©lise les donn√©es d'un magasin de musique num√©rique.
            </p>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="number">11</div>
                    <div class="label">Tables Relationnelles</div>
                </div>
                <div class="stat-card">
                    <div class="number">3 503</div>
                    <div class="label">Pistes Audio</div>
                </div>
                <div class="stat-card">
                    <div class="number">347</div>
                    <div class="label">Albums</div>
                </div>
                <div class="stat-card">
                    <div class="number">275</div>
                    <div class="label">Artistes</div>
                </div>
                <div class="stat-card">
                    <div class="number">412</div>
                    <div class="label">Factures (donn√©es)</div>
                </div>
                <div class="stat-card">
                    <div class="number">21</div>
                    <div class="label">Exercices r√©solus</div>
                </div>
            </div>
            
            <h3> Objectifs d'apprentissage</h3>
            <p style="margin-bottom: 15px;">
                Ce projet vise √† d√©velopper les comp√©tences suivantes en SQL avanc√© :
            </p>
            <ul style="font-size: 1.1em; line-height: 2;">
                <li><strong>Vues SQL</strong> : Cr√©er des vues pour simplifier l'acc√®s aux donn√©es agr√©g√©es</li>
                <li><strong>CTE (Common Table Expressions)</strong> : Utiliser des requ√™tes temporaires pour des analyses en plusieurs √©tapes</li>
                <li><strong>Proc√©dures stock√©es</strong> : D√©velopper des proc√©dures avec param√®tres IN et OUT</li>
                <li><strong>Fonctions personnalis√©es</strong> : Cr√©er des fonctions SQL d√©terministes et r√©utilisables</li>
            </ul>
            
            <h3> Contexte p√©dagogique</h3>
            <p style="font-size: 1.05em; line-height: 1.8;">
                Les 21 requ√™tes r√©solus couvrent diff√©rents aspects de la manipulation et de l'analyse 
                de donn√©es relationnelles. Chaque solution a √©t√© d√©velopp√©e en suivant les bonnes pratiques 
                SQL : nommage coh√©rent, commentaires explicites, et optimisation des requ√™tes. 
                Les r√©sultats obtenus permettent d'observer les patterns commerciaux pr√©sents dans les donn√©es, 
                sans pr√©tention √† fournir des recommandations op√©rationnelles.
            </p>
        </section>
        
        <!-- Section Diagramme ERD -->
        <section id="erd">
            <h2> Diagramme ERD (Entity-Relationship)</h2>
            
            <p style="font-size: 1.1em; margin-bottom: 20px;">
                Le diagramme ci-dessous illustre l'architecture compl√®te de la base de donn√©es avec les <strong>11 entit√©s</strong>, 
                leurs <strong>attributs</strong> et les <strong>relations</strong> entre elles.
            </p>
            
            <div class="mermaid-container">
                <div class="mermaid">
erDiagram
    %% Domaine Catalogue Musical
    Artist ||--o{ Album : "poss√®de"
    Album ||--o{ Track : "contient"
    Genre ||--o{ Track : "cat√©gorise"
    MediaType ||--o{ Track : "d√©finit"
    
    %% Domaine Playlists
    Playlist ||--o{ PlaylistTrack : "contient"
    Track ||--o{ PlaylistTrack : "appara√Æt_dans"
    
    %% Domaine Commercial
    Customer ||--o{ Invoice : "passe"
    Invoice ||--o{ InvoiceLine : "contient"
    Track ||--o{ InvoiceLine : "vendu_dans"
    
    %% Domaine RH
    Employee ||--o{ Customer : "supporte"
    Employee ||--o{ Employee : "rapporte_√†"
    
    Artist {
        int ArtistId PK
        varchar Name
    }
    
    Album {
        int AlbumId PK
        varchar Title
        int ArtistId FK
    }
    
    Track {
        int TrackId PK
        varchar Name
        int AlbumId FK
        int MediaTypeId FK
        int GenreId FK
        int Milliseconds
        numeric UnitPrice
    }
    
    Genre {
        int GenreId PK
        varchar Name
    }
    
    MediaType {
        int MediaTypeId PK
        varchar Name
    }
    
    Playlist {
        int PlaylistId PK
        varchar Name
    }
    
    PlaylistTrack {
        int PlaylistId PK_FK
        int TrackId PK_FK
    }
    
    Customer {
        int CustomerId PK
        varchar FirstName
        varchar LastName
        varchar Email
        varchar Country
        int SupportRepId FK
    }
    
    Employee {
        int EmployeeId PK
        varchar FirstName
        varchar LastName
        varchar Title
        int ReportsTo FK
    }
    
    Invoice {
        int InvoiceId PK
        int CustomerId FK
        datetime InvoiceDate
        numeric Total
    }
    
    InvoiceLine {
        int InvoiceLineId PK
        int InvoiceId FK
        int TrackId FK
        numeric UnitPrice
        int Quantity
    }
                </div>
            </div>
            
            <h3> Organisation en 4 domaines</h3>
            <table class="results-table">
                <thead>
                    <tr>
                        <th>Domaine</th>
                        <th>Tables</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Catalogue Musical</strong></td>
                        <td>Artist, Album, Track, Genre, MediaType</td>
                        <td>Gestion du catalogue de musique (artistes, albums, pistes)</td>
                    </tr>
                    <tr>
                        <td><strong>Playlists</strong></td>
                        <td>Playlist, PlaylistTrack</td>
                        <td>Listes de lecture utilisateur (relation N:M)</td>
                    </tr>
                    <tr>
                        <td><strong>Gestion Commerciale</strong></td>
                        <td>Customer, Invoice, InvoiceLine</td>
                        <td>Clients, factures et transactions</td>
                    </tr>
                    <tr>
                        <td><strong>Ressources Humaines</strong></td>
                        <td>Employee</td>
                        <td>Employ√©s avec hi√©rarchie organisationnelle</td>
                    </tr>
                </tbody>
            </table>
        </section>
        
        <!-- Section R√©sultats -->
        <section id="results">
            <h2> R√©sultats des analyses</h2>
            
            <!-- Tabs pour diff√©rents r√©sultats -->
            <div class="tabs">
                <button class="tab active" onclick="showTab('ventes')">Ventes par pays</button>
                <button class="tab" onclick="showTab('genres')">Genres musicaux</button>
                <button class="tab" onclick="showTab('artistes')">Top Artistes</button>
            </div>
            
            <!-- Tab Ventes -->
            <div id="ventes" class="tab-content active">
                <h3> Ventes par pays</h3>
                
                <table class="results-table">
                    <thead>
                        <tr>
                            <th>Pays</th>
                            <th>Clients</th>
                            <th>Total Ventes (‚Ç¨)</th>
                            <th>Moy/Client (‚Ç¨)</th>
                            <th>Part de march√©</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>üá∫üá∏ USA</strong></td>
                            <td>13</td>
                            <td>523.06</td>
                            <td>40.24</td>
                            <td><strong>22.5%</strong></td>
                        </tr>
                        <tr>
                            <td>üá®üá¶ Canada</td>
                            <td>8</td>
                            <td>303.96</td>
                            <td>38.00</td>
                            <td>13.0%</td>
                        </tr>
                        <tr>
                            <td>üá´üá∑ France</td>
                            <td>5</td>
                            <td>195.10</td>
                            <td>39.02</td>
                            <td>8.4%</td>
                        </tr>
                        <tr>
                            <td>üáßüá∑ Brazil</td>
                            <td>5</td>
                            <td>190.10</td>
                            <td>38.02</td>
                            <td>8.2%</td>
                        </tr>
                        <tr>
                            <td>üá©üá™ Germany</td>
                            <td>4</td>
                            <td>156.48</td>
                            <td>39.12</td>
                            <td>6.7%</td>
                        </tr>
                        <tr style="background: #FFF9C4;">
                            <td><strong> Other (15 pays)</strong></td>
                            <td>15</td>
                            <td>604.30</td>
                            <td>40.29</td>
                            <td><strong>26.0%</strong></td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="chart-container">
                    <canvas id="salesChart"></canvas>
                </div>
            </div>
            
            <!-- Tab Genres -->
            <div id="genres" class="tab-content">
                <h3> Top 10 genres musicaux</h3>
                
                <table class="results-table">
                    <thead>
                        <tr>
                            <th>Rang</th>
                            <th>Genre</th>
                            <th>Pistes vendues</th>
                            <th>Pourcentage</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td> 1</td>
                            <td><strong>Rock</strong></td>
                            <td>472</td>
                            <td><strong>35.49%</strong></td>
                        </tr>
                        <tr>
                            <td> 2</td>
                            <td><strong>Latin</strong></td>
                            <td>248</td>
                            <td>18.65%</td>
                        </tr>
                        <tr>
                            <td> 3</td>
                            <td><strong>Metal</strong></td>
                            <td>164</td>
                            <td>12.33%</td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>Alternative & Punk</td>
                            <td>137</td>
                            <td>10.30%</td>
                        </tr>
                        <tr>
                            <td>5</td>
                            <td>Jazz</td>
                            <td>48</td>
                            <td>3.61%</td>
                        </tr>
                        <tr>
                            <td>6</td>
                            <td>Blues</td>
                            <td>41</td>
                            <td>3.08%</td>
                        </tr>
                        <tr>
                            <td>7</td>
                            <td>Classical</td>
                            <td>29</td>
                            <td>2.18%</td>
                        </tr>
                        <tr>
                            <td>8</td>
                            <td>Reggae</td>
                            <td>20</td>
                            <td>1.50%</td>
                        </tr>
                        <tr>
                            <td>9</td>
                            <td>R&B/Soul</td>
                            <td>20</td>
                            <td>1.50%</td>
                        </tr>
                        <tr>
                            <td>10</td>
                            <td>TV Shows</td>
                            <td>19</td>
                            <td>1.43%</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="chart-container">
                    <canvas id="genresChart"></canvas>
                </div>
            </div>
            
            <!-- Tab Artistes -->
            <div id="artistes" class="tab-content">
                <h3> Top 10 artistes par nombre d'albums</h3>
                
                <table class="results-table">
                    <thead>
                        <tr>
                            <th>Rang</th>
                            <th>Artiste</th>
                            <th>Nombre d'albums</th>
                            <th>Part du catalogue</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td> 1</td>
                            <td><strong>Iron Maiden</strong></td>
                            <td>21</td>
                            <td>6.1%</td>
                        </tr>
                        <tr>
                            <td> 2</td>
                            <td><strong>Led Zeppelin</strong></td>
                            <td>14</td>
                            <td>4.0%</td>
                        </tr>
                        <tr>
                            <td> 3</td>
                            <td><strong>Deep Purple</strong></td>
                            <td>11</td>
                            <td>3.2%</td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>Metallica</td>
                            <td>10</td>
                            <td>2.9%</td>
                        </tr>
                        <tr>
                            <td>5</td>
                            <td>U2</td>
                            <td>10</td>
                            <td>2.9%</td>
                        </tr>
                        <tr>
                            <td>6</td>
                            <td>Ozzy Osbourne</td>
                            <td>6</td>
                            <td>1.7%</td>
                        </tr>
                        <tr>
                            <td>7</td>
                            <td>Pearl Jam</td>
                            <td>5</td>
                            <td>1.4%</td>
                        </tr>
                        <tr>
                            <td>8</td>
                            <td>Faith No More</td>
                            <td>4</td>
                            <td>1.2%</td>
                        </tr>
                        <tr>
                            <td>9</td>
                            <td>Eric Clapton</td>
                            <td>4</td>
                            <td>1.2%</td>
                        </tr>
                        <tr>
                            <td>10</td>
                            <td>R.E.M.</td>
                            <td>4</td>
                            <td>1.2%</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>
        
        <!-- Section Code -->
        <section id="code">
            <h2> Exemples de code SQL</h2>
            
            <h3> Vue avec agr√©gation</h3>
            <pre><code>-- Vue v_billings : R√©sum√© des factures
CREATE OR REPLACE VIEW v_billings AS
SELECT 
    i.InvoiceId,
    i.InvoiceDate AS invoice_date,
    SUM(il.UnitPrice * il.Quantity) AS total
FROM 
    Invoice i
INNER JOIN 
    InvoiceLine il ON i.InvoiceId = il.InvoiceId
GROUP BY 
    i.InvoiceId, i.InvoiceDate
ORDER BY 
    i.InvoiceDate DESC;

-- R√©sultat : 412 factures agr√©g√©es</code></pre>
            
            <h3> CTE avec regroupement</h3>
            <pre><code>-- CTE : Ventes par pays avec regroupement "Other"
WITH customer_summary AS (
    SELECT 
        c.Country,
        COUNT(DISTINCT c.CustomerId) AS customers,
        SUM(i.Total) AS total_sales
    FROM Customer c
    LEFT JOIN Invoice i ON c.CustomerId = i.CustomerId
    GROUP BY c.Country
),
country_groups AS (
    SELECT 
        CASE 
            WHEN customers = 1 THEN 'Other'
            ELSE Country
        END AS country,
        SUM(total_sales) AS total_sales
    FROM customer_summary
    GROUP BY CASE WHEN customers = 1 THEN 'Other' ELSE Country END
)
SELECT * FROM country_groups
ORDER BY total_sales DESC;</code></pre>
            
            <h3> Fonction personnalis√©e</h3>
            <pre><code>-- Fonction de conversion millisecondes ‚Üí "XX min YY sec"
DELIMITER $$

CREATE FUNCTION ConvertMsToMinutesAndSeconds(milliseconds INT) 
RETURNS VARCHAR(50)
DETERMINISTIC
BEGIN
    DECLARE total_seconds INT;
    DECLARE minutes_part INT;
    DECLARE seconds_part INT;
    
    SET total_seconds = FLOOR(milliseconds / 1000);
    SET minutes_part = FLOOR(total_seconds / 60);
    SET seconds_part = total_seconds % 60;
    
    RETURN CONCAT(minutes_part, ' minutes ', seconds_part, ' secondes');
END$$

DELIMITER ;

-- Utilisation
SELECT ConvertMsToMinutesAndSeconds(1234567);
-- R√©sultat : "20 minutes 34 secondes"</code></pre>
        </section>
        
        <!-- Section Analyse -->
        <section id="analysis">
            <h2> Observations et analyse des donn√©es</h2>
            
            <p style="font-size: 1.1em; margin-bottom: 25px;">
                L'analyse des donn√©es de la base Chinook permet d'observer plusieurs patterns int√©ressants. 
                Ces observations sont le r√©sultat direct de l'ex√©cution des requ√™tes SQL d√©velopp√©es dans le cadre des exercices.
            </p>
            
            <div class="insight">
                <strong> Distribution g√©ographique des ventes</strong>
                <p>Les donn√©es montrent que les √âtats-Unis repr√©sentent 22.5% du chiffre d'affaires total (523‚Ç¨ sur 2 328‚Ç¨), 
                suivis par le Canada (13%) et la France (8.4%). On observe √©galement que 15 pays regroup√©s repr√©sentent 
                collectivement 26% des ventes. Cette distribution g√©ographique in√©gale est caract√©ristique des march√©s 
                de musique num√©rique en ligne au d√©but des ann√©es 2010.</p>
            </div>
            
            <div class="insight">
                <strong> R√©partition par genres musicaux</strong>
                <p>L'analyse par CTE r√©v√®le que le genre Rock domine largement avec 35.49% des pistes vendues, 
                suivi par Latin (18.65%) et Metal (12.33%). Ces trois genres concentrent 66% des ventes totales. 
                √Ä l'inverse, les genres Jazz (3.61%) et Blues (3.08%) repr√©sentent une part minoritaire. 
                Cette concentration refl√®te les pr√©f√©rences musicales de la client√®le cibl√©e par ce type de plateforme.</p>
            </div>
            
            <div class="insight">
                <strong> Panier moyen et comportement d'achat</strong>
                <p>Le panier moyen observ√© est de 5.65‚Ç¨ par commande. On note une variation selon les pays : 
                le Chili affiche le panier moyen le plus √©lev√© (6.66‚Ç¨), tandis que d'autres pays comme la Pologne 
                ou l'Inde ont des paniers moyens inf√©rieurs √† 5‚Ç¨. Ces √©carts peuvent s'expliquer par des diff√©rences 
                dans les habitudes d'achat (albums complets vs pistes isol√©es) ou par des facteurs socio-√©conomiques.</p>
            </div>
            
            <div class="insight">
                <strong> Concentration du catalogue</strong>
                <p>L'utilisation de la fonction CountAlbums() r√©v√®le que l'artiste Iron Maiden poss√®de 21 albums 
                dans le catalogue, soit 6.1% du total. Les 10 artistes les plus repr√©sent√©s concentrent environ 
                25% des albums. Cette concentration est typique des catalogues musicaux o√π certains artistes 
                prolifiques ou populaires occupent une place pr√©pond√©rante.</p>
            </div>
            
            <h3> M√©thodologie d'analyse</h3>
            <table class="results-table">
                <thead>
                    <tr>
                        <th>Technique SQL utilis√©e</th>
                        <th>Type d'analyse</th>
                        <th>Exemple d'observation</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Vues avec agr√©gation (SUM, COUNT)</td>
                        <td>Analyse descriptive</td>
                        <td>Calcul du CA total par facture</td>
                    </tr>
                    <tr>
                        <td>CTE avec GROUP BY</td>
                        <td>Segmentation</td>
                        <td>Ventes par pays, genres par r√©gion</td>
                    </tr>
                    <tr>
                        <td>Fonctions YEAR(), QUARTER()</td>
                        <td>Analyse temporelle</td>
                        <td>√âvolution trimestrielle des achats</td>
                    </tr>
                    <tr>
                        <td>Fonctions personnalis√©es</td>
                        <td>Calculs m√©tier</td>
                        <td>Conversion de dur√©es, comptages</td>
                    </tr>
                </tbody>
            </table>
            
            <h3> Limites de l'analyse</h3>
            <p style="font-size: 1.05em; line-height: 1.8; margin-top: 20px;">
                Il est important de noter que cette base de donn√©es contient des donn√©es synth√©tiques et historiques 
                (2009-2013). Les observations pr√©sent√©es ci-dessus sont donc valables uniquement dans le contexte 
                de ce jeu de donn√©es p√©dagogique. Elles ne constituent pas des pr√©dictions ni des recommandations 
                commerciales applicables √† un contexte r√©el. L'objectif principal reste l'apprentissage des techniques 
                SQL avanc√©es et leur application m√©thodique √† des probl√©matiques d'analyse de donn√©es.
            </p>
        </section>
        
        <!-- Section T√©l√©chargements -->
        <section id="downloads">
            <h2> Documents disponibles</h2>
            
            <p style="font-size: 1.1em; margin-bottom: 30px;">
                L'ensemble de la documentation du projet est disponible au t√©l√©chargement ci-dessous. 
                Les documents Word (.docx) sont modifiables et contiennent le code SQL complet ainsi que 
                les tableaux de r√©sultats d√©taill√©s.
            </p>
            
            <h3>üìÑ Documentation principale</h3>
            
            <div class="downloads-grid">
                <div class="download-card">
                    <div class="download-icon">üìò</div>
                    <h4>Code SQL Comment√©</h4>
                    <p>Document Word avec les 21 requ√™tes SQL comment√©es et expliqu√©es ligne par ligne.</p>
                    <div class="download-meta">
                        <span>üìÑ Format : DOCX</span>
                        <span>üìä ~45 pages</span>
                    </div>
                    <a href="../diagrams/SQL_Code_Complet_21Questions.docx" class="download-btn" download>
                        ‚¨áÔ∏è T√©l√©charger le code
                    </a>
                </div>
                
                <div class="download-card">
                    <div class="download-icon">üìä</div>
                    <h4>R√©sultats Complets</h4>
                    <p>Document Word avec 17 tableaux de r√©sultats et analyses m√©tier pour chaque exercice.</p>
                    <div class="download-meta">
                        <span>üìÑ Format : DOCX</span>
                        <span>üìä ~40 pages</span>
                    </div>
                    <a href="../diagrams/SQL_Resultats_Complets_21Questions.docx" class="download-btn" download>
                        ‚¨áÔ∏è T√©l√©charger les r√©sultats
                    </a>
                </div>
                
                <div class="download-card">
                    <div class="download-icon">üó∫Ô∏è</div>
                    <h4>Sch√©mas de la base</h4>
                    <p>Documentation compl√®te avec ERD, sch√©ma relationnel et description des 11 tables.</p>
                    <div class="download-meta">
                        <span>üìÑ Format : DOCX</span>
                        <span>üìä ~20 pages</span>
                    </div>
                    <a href="../diagrams/SQL_Schemas_Database.docx" class="download-btn" download>
                        ‚¨áÔ∏è T√©l√©charger les sch√©mas
                    </a>
                </div>
            </div>
            
            <h3 style="margin-top: 40px;">üñºÔ∏è Diagrammes (images haute r√©solution)</h3>
            
            <div class="downloads-grid">
                <div class="download-card">
                    <div class="download-icon">üìê</div>
                    <h4>Diagramme ERD</h4>
                    <p>Diagramme Entity-Relationship avec les 11 tables et leurs relations.</p>
                    <div class="download-meta">
                        <span>üìÑ PNG + PDF</span>
                        <span>üé® Haute qualit√©</span>
                    </div>
                    <a href="../diagrams/Chine.png" class="download-btn" download>
                        ‚¨áÔ∏è T√©l√©charger ERD (PDF)
                    </a>
                </div>
                
                <div class="download-card">
                    <div class="download-icon">üìã</div>
                    <h4>Sch√©ma Relationnel</h4>
                    <p>Sch√©ma d√©taill√© avec tous les attributs, types et contraintes (PK/FK).</p>
                    <div class="download-meta">
                        <span>üìÑ PNG + PDF</span>
                        <span>üé® 300 DPI</span>
                    </div>
                    <a href="../diagrams/Chinook_ERD.png" class="download-btn" download>
                        ‚¨áÔ∏è T√©l√©charger sch√©ma (PDF)
                    </a>
                </div>
            </div>
        </section>
        
        <!-- Footer -->
        <footer>
            <h3>üë§ Emmanuel Paguiel BOUENDO</h3>
            <p>Master 2 √âconomiste de l'Entreprise (MECEN) | Universit√© de Tours | 2025-2026</p>
            <p style="margin-top: 20px;">
                <a href="https://github.com/Paguy-Stream" target="_blank">GitHub</a> ‚Ä¢ 
                <a href="emmanuelpaguiel@gmail.com>Email</a>
            </p>
            <p style="margin-top: 20px; color: #666;">
                Made with ‚ù§Ô∏è and SQL | ¬© 2025
            </p>
        </footer>
    </div>
    
    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
        // Initialisation de Mermaid
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
                primaryColor: '#E94560',
                primaryTextColor: '#fff',
                primaryBorderColor: '#0F3460',
                lineColor: '#0F3460',
                secondaryColor: '#667eea',
                tertiaryColor: '#F5F5F5'
            }
        });
        
        // Fonction pour changer d'onglet
        function showTab(tabId) {
            // Cacher tous les contenus
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // D√©sactiver tous les tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Activer le tab s√©lectionn√©
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }
        
        // Graphique des ventes par pays
        const salesCtx = document.getElementById('salesChart');
        if (salesCtx) {
            new Chart(salesCtx, {
                type: 'bar',
                data: {
                    labels: ['USA', 'Other', 'Canada', 'France', 'Brazil', 'Germany'],
                    datasets: [{
                        label: 'Ventes (‚Ç¨)',
                        data: [523.06, 604.30, 303.96, 195.10, 190.10, 156.48],
                        backgroundColor: [
                            'rgba(233, 69, 96, 0.8)',
                            'rgba(255, 193, 7, 0.8)',
                            'rgba(102, 126, 234, 0.8)',
                            'rgba(76, 175, 80, 0.8)',
                            'rgba(255, 152, 0, 0.8)',
                            'rgba(156, 39, 176, 0.8)'
                        ],
                        borderColor: [
                            'rgba(233, 69, 96, 1)',
                            'rgba(255, 193, 7, 1)',
                            'rgba(102, 126, 234, 1)',
                            'rgba(76, 175, 80, 1)',
                            'rgba(255, 152, 0, 1)',
                            'rgba(156, 39, 176, 1)'
                        ],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        title: {
                            display: true,
                            text: 'R√©partition des ventes par pays',
                            font: {
                                size: 16,
                                weight: 'bold'
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Montant (‚Ç¨)'
                            }
                        }
                    }
                }
            });
        }
        
        // Graphique des genres
        const genresCtx = document.getElementById('genresChart');
        if (genresCtx) {
            new Chart(genresCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Rock', 'Latin', 'Metal', 'Alternative & Punk', 'Jazz', 'Blues', 'Autres'],
                    datasets: [{
                        data: [35.49, 18.65, 12.33, 10.30, 3.61, 3.08, 16.54],
                        backgroundColor: [
                            'rgba(233, 69, 96, 0.8)',
                            'rgba(255, 152, 0, 0.8)',
                            'rgba(76, 75, 80, 0.8)',
                            'rgba(102, 126, 234, 0.8)',
                            'rgba(76, 175, 80, 0.8)',
                            'rgba(33, 150, 243, 0.8)',
                            'rgba(158, 158, 158, 0.8)'
                        ],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right'
                        },
                        title: {
                            display: true,
                            text: 'R√©partition des genres musicaux (%)',
                            font: {
                                size: 16,
                                weight: 'bold'

                            }

                        }
                    }
                    
                }
            });
        }
    </script> 
</body>
</html>      